<!DOCTYPE html>
<html lang="en">
<head>
  <title>Pizza Assignment</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script type="text/javascript">
    var orderList = [];
    var favoriteList = []
    var pizzaSelection;
    var brocolliCheckFlag, garlicCheckFlag, onionCheckFlag;
    var pizzaBaseSubtotal = 0;
    var toppingSubtotal = 0;
  
      $(document).ready(function(e) {
        $('input[type=radio][name=pizza_select]').on('change', function() {
            switch ($(this).val()) {
              case 'pepperoni':
                pizzaSelection = 'pepperoni';
                pizzaBaseSubtotal = 100
                document.getElementById("pizza_name_display").innerHTML = 
                      `<label id="pizza_selection_label">You Select: Pepperoni&nbsp;&nbsp;&nbsp;$${pizzaBaseSubtotal}</label>`;
                      updateSum();
                break;
              case 'deluxe':
                pizzaSelection = 'deluxe';
                pizzaBaseSubtotal = 120
                document.getElementById("pizza_name_display").innerHTML = 
                      `<label id="pizza_selection_label">You Select: Deluxe&nbsp;&nbsp;&nbsp;$${pizzaBaseSubtotal}</label>`;
                      updateSum();
                break;
              case 'veggie':
                pizzaSelection = 'veggie';
                pizzaBaseSubtotal = 90
                document.getElementById("pizza_name_display").innerHTML = 
                      `<label id="pizza_selection_label">You Select: Veggie&nbsp;&nbsp;&nbsp;$${pizzaBaseSubtotal}</label>`;
                      updateSum();
              break;
              case 'cheese':
                pizzaSelection = 'cheese';
                pizzaBaseSubtotal = 90
                document.getElementById("pizza_name_display").innerHTML = 
                      `<label id="pizza_selection_label">You Select: Cheese&nbsp;&nbsp;&nbsp;$${pizzaBaseSubtotal}</label>`;
                      updateSum();
              break;
            }
          });
        });
        
        // Checking the topping selection, updating tally list and price
        function brocolliCheck(elem) {
          if (elem.checked){
            brocolliCheckFlag = true;
            brocolliCheckTally = document.createElement('p');
            brocolliCheckTally.innerHTML = "Brocolli $50"
            tallySection = document.getElementById("tallySection");
            tallySection.appendChild(brocolliCheckTally);
            toppingSubtotal += 50;
            updateSum();
          } else {
            brocolliCheckFlag = false;
            tallySection.removeChild(brocolliCheckTally);
            toppingSubtotal -= 50;
            updateSum();
          }
        }
        function garlicCheck(elem) {
          if (elem.checked){
            garlicCheckFlag = true;
            garlicCheckTally = document.createElement('p');
            garlicCheckTally.innerHTML = 'Garlic  $60'
            tallySection = document.getElementById("tallySection");
            tallySection.appendChild(garlicCheckTally);
            toppingSubtotal += 60;
            updateSum();
          } else {
            garlicCheckFlag = false;
            tallySection.removeChild(garlicCheckTally);
            toppingSubtotal -= 60;
            updateSum();
          }
        }
        function onionCheck(elem) {
          if (elem.checked){
            onionCheckFlag = true;
            onionCheckTally = document.createElement('p');
            onionCheckTally.innerHTML = "Onion $40"
            tallySection = document.getElementById("tallySection");
            tallySection.appendChild(onionCheckTally);
            toppingSubtotal += 40;
            updateSum();
          } else {
            onionCheckFlag = false;
            tallySection.removeChild(onionCheckTally);
            toppingSubtotal -=40;
            updateSum();
          }
        }
        
        
        function addToCart() {
          document.getElementById("cart").innerHTML = "";
          var orderObject = {};
          
          orderObject.pizza = pizzaSelection;
          if(brocolliCheckFlag){orderObject.brocolliCheck = true}else{orderObject.brocolliCheck = false}
          if(garlicCheckFlag){orderObject.garlicCheck = true}else{orderObject.garlicCheck = false}
          if(onionCheckFlag){orderObject.onionCheck = true}else{orderObject.onionCheck = false}
          orderObject.totalPrice = pizzaBaseSubtotal + toppingSubtotal;
          orderObject.favoriteName = document.getElementById("favName").value;
          orderList.push(orderObject);
          // Construct string for localStorage

          localStorage.setItem("orderList",JSON.stringify(orderList));
          // localStorage.clear();
          // Test to see if the list of order JSON object is successfully constructed

          orderList.forEach(function(arrayItem) {
            orderObjectPrint = document.createElement('p');
            orderObjectPrint.innerHTML = JSON.stringify(arrayItem, null, 4);
            cart = document.getElementById('cart');
            cart.appendChild(orderObjectPrint);
          });
        }


        function updateSum() {
          document.getElementById("subtotalAmount").value = toppingSubtotal;
          document.getElementById("totalAmount").value = pizzaBaseSubtotal + toppingSubtotal;
        }

   
   
  
  </script>
  <style>
    ul {
      list-style-type: none;
    }

    .fakeimg {
      height: 200px;
      background: #aaa;
    }
    #title{
        background-color: #f38342;
        /* background-repeat: no-repeat; */
        /* background-attachment: fixed; */
        /* background-size: cover; */
    }
    #header{
      font-style: italic;
      font-weight: 800;
    }
    .nav-item{
      font-style: italic;
      font-weight: 400;
      padding: 0px 40px;
    }

    .pizzaSelect {
      display: flex;
      justify-content: center;
    }
    .pizzaSelect img{
      width: 80%;
    }

    .orderSection {
      display: flex;
      padding: 30px;
      justify-content: center;
    }

    .tallySection {
      padding: 10px;
    }

    [type=radio] { 
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    /* IMAGE STYLES */
    [type=radio] + img {
      cursor: pointer;
      
    }

    /* CHECKED STYLES */
    [type=radio]:checked + img {
      outline: 5px solid #f38342;
    }

    [type=checkbox] { 
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    /* IMAGE STYLES */
    [type=checkbox] + img {
      cursor: pointer;
    }

    /* CHECKED STYLES */
    [type=checkbox]:checked + img {
      outline: 2px solid rgb(154, 66, 12);
    }


  </style>    
</head>
<body>

<div id = "title"class="jumbotron text-center" style="margin-bottom:0">
  <h1 id="header">Pizza House</h1>
  <p>Welcome to the pizza house</p> 
</div>

<nav class="navbar navbar-expand-sm bg-dark navbar-dark  justify-content-center">
  <a class="navbar-brand justify-content-front" ">Logged in</a>
  <ul class="navbar-nav">
    <li class="nav-item">
      <a class="nav-link"  href="../login/Home.html" id="Home">   Home   </a>
    </li>
    <li class="nav-item">
      <a class="nav-link"  href="../login/menu.html" id="Menu">   Menu   </a>
    </li>
    <li class="nav-item">
      <a class="nav-link"  href="../login/order.html" id="Order">Order</a>
    </li>
    <li class="nav-item">
      <a class="nav-link"  href="../login/cart.html" id="Cart">Cart</a>
    </li>
    <li class="nav-item">
      <a class="nav-link"  href="../logout/home.html" id="Logout">Log Out</a>
    </li>
    </div>
  </ul>
</nav>
<div>
  <p></p>
</div>
<div align="center"><h1>Pizza Selection</h1></div>
<div class="pizzaSelect">
  <label>
    <input type="radio" name="pizza_select" value="pepperoni">
    <img src="../images/main pizza/pepperoni_pizza.jpg">
  </label>
  
  <label>
    <input type="radio" name="pizza_select" value="deluxe">
    <img src="../images/main pizza/deluxe_pizza.jpg">
  </label>

  <label>
    <input type="radio" name="pizza_select" value="veggie">
    <img src="../images/main pizza/veggie_pizza.jpg">
  </label>

  <label>
    <input type="radio" name="pizza_select" value="cheese">
    <img src="../images/main pizza/cheese_craver.jpg">
  </label>
</div>

<div align="center"><h1>Choose the size</h1></div>


<div align="center"><h1>Choose the crust</h1></div>

<div align="center"><h1>Choose topping</h1></div>

<div><div class="orderSection">
  <ul>
    <li>
      <label>
        <input type="checkbox" id="brocolliCheck" value="Brocolli" style="opacity:0" onchange="brocolliCheck(this)">
        <img src="../images/topping/brocolli.jpg"> Brocolli
      </label>
    <!-- </li>
    <li> -->
      <label>
        <input type="checkbox" id="garlicCheck" value="Garlic" onchange="garlicCheck(this)">
        <img src="../images/topping/garlic.jpg"> Garlic
      </label>
    <!-- <li> -->
      <label>
        <input type="checkbox" id="onionCheck" value="Onion" onchange="onionCheck(this)">
        <img src="../images/topping/onion.jpg"> Onion
      </label>
    </li>
    
  </ul>
  
</div>
</div>

<div align="center"><h1>any special topping?</h1></div>


<div id = "pizza_name_display">
  <label id="pizza_selection_label">You Select:</label>
</div>
<div > 
  
  <label for="tally">Your topping:     </label>
</div>
<div id="tallySection" class="tallySection">
  <p id="tallyResult" ></p>
</div>
<button type="button" id="addToCartButton" name="Add to Cart" onclick="addToCart()">Add to Cart</button>
<button type="button" id="addToFavoriteButton" name="Add to Favorite" onclick="addToFavorite()">Add to Favorite</button>
<input type="text" id="favName" placeholder="Name of your favorite">
<div id="subTotal" class="orderSection">
  <label for="subTotalLabel">Topping subtotal:</label>
  <input type="text" id="subtotalAmount" value="0">
  <label for="totalLabel">Order Total:</label>
  <input type="text" id="totalAmount" value="0">
</div>

<div id="cart" class="orderSection">
  
</div>




</body>
</html>